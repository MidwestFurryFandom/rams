{% import 'macros.html' as macros with context %}
{% import 'forms/macros.html' as form_macros with context %}
{% set retro_game_info = retro_game_info or game_forms['retro_game_info'] %}
{% set retro_game_details = retro_game_details or game_forms['retro_game_details'] %}
{% set retro_logistics = retro_logistics or game_forms['retro_logistics'] %}

{# BLOCK NAMES in this form:
    x_data
    basic_info
    genres
    desc
    links
    game_code
    how_to_play
    game_screenshots_modal

  Use these to add or rearrange fields. Remember to use {{ super() }} to print the original fields as-is.
#}

<div x-data="{ {% block x_data %}{% endblock %} }">

<div class="row g-3 mb-3">
{% block basic_info %}
<div class="col-sm">{{ form_macros.input(retro_game_info.title) }}</div>
<div class="col-sm">
    <div class="form-text">Studio</div>
    {{ review.game.studio.name }}
</div>
<div class="col-sm">{{ form_macros.input(retro_game_info.publisher_name) }}</div>
</div><div class="row g-3 mb-3">
<div class="col-sm">{{ form_macros.input(retro_game_info.brief_description) }}</div>
<div class="col-sm">{{ form_macros.input(retro_game_details.description) }}</div>
{% endblock %}
</div>

<div class="row g-3 mb-3">
{% block logistics %}
  <div class="col-sm">{{ form_macros.input(retro_logistics.in_person) }}</div>
</div><div class="row g-3 mb-3">
  <div class="col-sm">{{ form_macros.input(retro_logistics.delivery_method) }}</div>
{% endblock %}
</div>

<div class="row g-3 mb-3">
{% block genres %}
<div class="col-sm">{{ form_macros.input(retro_game_details.genres) }}</div>
{% if game.genres_text %}
<div class="col-sm">{{ form_macros.input(retro_game_details.genres_text) }}</div>
{% endif %}
{% endblock %}
</div>

<div class="row g-3 mb-3">
{% block platforms %}
<div class="col-sm">{{ form_macros.input(retro_game_details.platforms) }}</div>
{% if game.platforms_text %}
<div class="col-sm">{{ form_macros.input(retro_game_details.platforms_text) }}</div>
{% endif %}
{% endblock %}
</div>

<div class="row g-3 mb-3">
{% block release_date_desc %}
<div class="col-sm">{{ form_macros.input(retro_game_details.release_date) }}</div>
<div class="col-sm">{{ form_macros.input(retro_logistics.link_to_webpage) }}</div>
{% endblock %}
</div>

<hr/>

<div class="row g-3 mb-3">
{% block logo_assets %}
<div class="col-sm">
    <div class="form-text">{{ retro_game_details.game_logo.label.text }}</div>
    <a href="{{ game.game_logo_image.url }}" target="_blank">{{ game.game_logo_image.filename }}</a>
</div>
<div class="col-sm">{{ form_macros.input(retro_game_details.other_assets) }}</div>
{% endblock %}
</div>

<div class="row g-3 mb-3">
{% block links %}
<div class="col-sm">
    <div class="form-text">{{ retro_game_details.link_to_video.label.text }}</div>
    {{ review.link_to_video }}
</div>
<div class="col-sm">
    <div class="form-text">{{ retro_game_details.link_to_game.label.text }}</div>
    {{ review.link_to_game }}
</div>
{% endblock %}
</div>

<div class="row g-3 mb-3">
{% block how_to_play %}
  <div class="col-sm">
    {{ form_macros.input(retro_game_details.how_to_play) }}
</div>
{% endblock %}
</div>

{% block game_screenshots_modal %}
<div
    id="screenshots-{{ game.id }}"
    class="modal fade"
    tabindex="-1"
    role="dialog"
    aria-labelledby="screenshots-{{ game.id }}-title"
    style="display: none">
    <div class="modal-dialog modal-xl" role="document">
    <div class="modal-content">
        <div class="modal-body">
            {% for image in game.screenshots %}
            <img class="img-fluid" src="{{ image.url }}" />
            {% endfor %}
        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Close</button>
        </div>
    </div>
    </div>
</div>
<button type="button" class="btn btn-primary mb-3" data-bs-toggle="modal" data-bs-target="#screenshots-{{ game.id }}">View Screenshots</button>
{% endblock %}

</div>