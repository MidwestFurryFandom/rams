{% extends "preregistration/preregbase.html" %}
{% import 'forms/macros.html' as form_macros with context %}
{% set title_text = "Art Show Application" %}
{% block content %}
<h2>{{ c.EVENT_NAME }} Art Show Application</h2>
<div class="card">
  <div class="card-body">
    {% if c.DEV_BOX %}
      <div class="alert alert-info">
        <strong> You are on a development box.
          {% if c.BEFORE_ART_SHOW_REG_START %}
            Otherwise, you would be automatically redirected to <a href="../static_views/art_show_not_open.html">the "art show reg not yet open" page</a>.
          {% elif c.AFTER_ART_SHOW_DEADLINE and not c.AT_THE_CON %}
            Otherwise, you would be automatically redirected to <a href="../static_views/art_show_closed.html">the "art show reg closed" page</a>.
          {% endif %}
        </strong>
      </div>
    {% endif %}
    {% if c.AFTER_ART_SHOW_DEADLINE and not c.HAS_ART_SHOW_ACCESS %}
      <p>Unfortunately, the deadline for art show {{ c.ART_SHOW_APP_TERM }}s has passed and we are no longer accepting {{ c.ART_SHOW_APP_TERM }}s.</p>
    {% else %}
      {% if c.ART_SHOW_WAITLIST and c.AFTER_ART_SHOW_WAITLIST %}
        <p style="color:orange">
          The deadline for art show {{ c.ART_SHOW_APP_TERM }}s has passed. You may still submit an {{ c.ART_SHOW_APP_TERM }} to be put on our waiting
          list. {{ c.ART_SHOW_APP_TERM|title }}s will close completely on {{ c.ART_SHOW_DEADLINE|datetime_local }}.
          Space is limited and may be filled prior to the {{ c.ART_SHOW_APP_TERM }} window closing.
        </p>
      {% endif %}

    <p>
    {% if c.ART_SHOW_WAITLIST %}
      Art show {{ c.ART_SHOW_APP_TERM }}s are due by {{ c.ART_SHOW_WAITLIST|datetime_local }}. Any {{ c.ART_SHOW_APP_TERM }}s submitted after this
      date will be automatically waitlisted.
    {% endif %}
    {{ c.ART_SHOW_APP_TERM|title }}s will close completely on {{ c.ART_SHOW_DEADLINE|datetime_local }}.</p>

    <p></p>Please review the {{ c.EVENT_NAME }} Art Show rules
    <a href="{{ c.ART_SHOW_RULES_URL }}" target="_blank">here</a>. Space is limited and may be filled prior to the {{ c.ART_SHOW_APP_TERM }} window closing.</p>

    {{ form_macros.form_validation('new-app-form', 'validate_app') }}
    <form novalidate method="post" action="index" role="form" id="new-app-form" x-data="{
      not_attending: {{ not_attending|boolean|tojson }},
      new_badge: {{ (new_badge or c.INDEPENDENT_ART_SHOW)|boolean|tojson }},
      conf_readonly: {{ (attendee.id and not attendee.is_new)|boolean|tojson }}
    }">
    {{ csrf_token() }}
      <h3>Your Information</h3>
      {% if not c.INDEPENDENT_ART_SHOW %}
      <div class="row g-3 mb-3">
        <div class="col-sm">
          <label for="attendee_id" class="form-text">Confirmation Number</label>
          <input type="text" name="attendee_id" class="form-control" placeholder="xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"
                  value="{{ attendee_id }}" :readonly="conf_readonly" :disabled="new_badge" />
          <div class="form-text">The confirmation number you received when you registered.</div>
          <div id="attendee_id-validation" class="invalid-feedback" role="alert" style="display: block;"></div>
        </div>
      </div>
      {% if not attendee_id %}
      <div class="row g-3 mb-3">
        <div class="col-12">
          <label class="form-check-label">
          <input type="checkbox" class="form-check-input" name="new_badge" x-model="new_badge"  />
            I don't have a badge for {{ c.EVENT_NAME }} yet.
          </label>
        </div>
      </div>

      <div class="card card-body mt-2" x-show="new_badge">
        <p>
          Enter your information below. A new badge will be created for you, and you'll have the
          opportunity to complete your registration after submitting your {{ c.ART_SHOW_APP_TERM }}.
        </p>
      {% endif %}
      {% endif %}
      {% if not attendee_id %}
      {% set forms = attendee_forms %}
        <div x-show="new_badge">
        {% include 'forms/art_show/artist_attendee_info.html' with context %}
        </div>
        {% if not c.INDEPENDENT_ART_SHOW %}
      </div>
        {% endif %}
      {% endif %}

      <h3 class="mt-3">Art Information</h3>
      {% set forms = app_forms %}
      {% include 'forms/art_show/art_show_info.html' with context %}

      <div class="row g-3">
        <div class="col-sm">
          <button type="submit" class="btn btn-primary">Submit {{ c.ART_SHOW_APP_TERM|title }}</button>
        </div>
      </div>
    </form>

    {% endif %}
  </div>
</div>
{% endblock %}